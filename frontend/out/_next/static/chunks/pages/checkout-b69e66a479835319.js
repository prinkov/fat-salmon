(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[222],{2013:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/checkout",function(){return n(5664)}])},5664:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return w}});var i=n(7568),r=n(828),a=n(655),s=n(5893),o=n(2734),c=n(7357),d=n(155),l=n(3946),u=n(5861),h=n(3321),f=n(9008),x=n.n(f),g=n(7294),p=n(1023),m=n(5675),b=n.n(m),j=n(1163),v=n(3096),y=n(4242),Z=n(3009);function w(){var e=(0,r.Z)((0,v.dG)(),1)[0],t=(0,o.Z)(),n=(0,j.useRouter)(),f=(0,y.$M)(e).sender,m=(0,v.EK)(),w=(0,g.useState)(),_=w[0],k=w[1],I=(0,g.useState)([]),S=I[0],C=I[1];(0,g.useEffect)((function(){C(JSON.parse(localStorage.getItem("cart")||"[]"))}),[]),(0,g.useEffect)((function(){f&&!_&&Z.Mf.create("testnet",f).then((function(e){return k(e)}))}),[f]);var E=Math.round(100*S.reduce((function(e,t){return e+t.price*t.quantity}),0))/100;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(x(),{children:(0,s.jsx)("title",{children:"Fat Salmon \u2014 \u041e\u043f\u043b\u0430\u0442\u0430"})}),(0,s.jsxs)(c.Z,{p:2,pb:t.spacing(10),sx:{maxWidth:600,mx:"auto"},children:[(0,s.jsx)(d.Z,{}),(0,s.jsxs)(c.Z,{display:"flex",alignItems:"center",mb:3,children:[(0,s.jsx)(l.Z,{onClick:function(){return n.back()},sx:{mr:1},children:(0,s.jsx)(p.Z,{})}),(0,s.jsx)(u.Z,{variant:"h5",fontWeight:700,children:"\u041e\u0444\u043e\u0440\u043c\u043b\u0435\u043d\u0438\u0435 \u0437\u0430\u043a\u0430\u0437\u0430"})]}),0===S.length?(0,s.jsx)(u.Z,{variant:"body1",textAlign:"center",mt:8,children:"\u041a\u043e\u0440\u0437\u0438\u043d\u0430 \u043f\u0443\u0441\u0442\u0430 \ud83d\ude14"}):S.map((function(e){return(0,s.jsxs)(c.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:2,p:2,borderRadius:3,backgroundColor:"#fff",boxShadow:"0 2px 6px rgba(0,0,0,0.05)"},children:[(0,s.jsxs)(c.Z,{sx:{display:"flex",alignItems:"center"},gap:2,children:[(0,s.jsx)(b(),{src:"/".concat(e.image),width:72,height:72,alt:e.name,style:{borderRadius:"8px",objectFit:"cover"}}),(0,s.jsxs)(c.Z,{children:[(0,s.jsx)(u.Z,{fontWeight:600,children:e.name}),(0,s.jsxs)(u.Z,{variant:"body2",color:"text.secondary",children:[e.quantity," \u0448\u0442."]})]})]}),(0,s.jsxs)(u.Z,{fontWeight:600,children:[e.price*e.quantity," \u20be"]})]},e.name)})),S.length>0&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(c.Z,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mt:4,mb:2},children:[(0,s.jsx)(u.Z,{variant:"h6",fontWeight:700,children:"\u0418\u0442\u043e\u0433\u043e"}),(0,s.jsxs)(u.Z,{variant:"h6",fontWeight:700,children:[E," \u20be"]})]}),(0,s.jsxs)(h.Z,{variant:"contained",disabled:!f||!_||!m,sx:{position:"fixed",bottom:t.spacing(1.5),left:t.spacing(1.5),right:t.spacing(1.5),height:t.spacing(6),backgroundColor:"#E76F51",fontWeight:700,color:"#fff",borderRadius:2,"&:hover":{backgroundColor:"#d45e44"}},onClick:(0,i.Z)((function(){var e,t,n,i,r,s,o;return(0,a.__generator)(this,(function(a){switch(a.label){case 0:return i=null===(e=window.Telegram)||void 0===e||null===(t=e.WebApp)||void 0===t?void 0:t.initDataUnsafe,r=null===i||void 0===i||null===(n=i.user)||void 0===n?void 0:n.id,f&&_&&m?(s=Date.now().toString(),[4,_.getStore("UQC46A1mTIslictugxIUtibVUKEPgZikdqDiAPfmASDnrIlI").requestPurchase({invoiceId:s,amount:E,metadata:JSON.stringify({chat_id:r}),currency:Z.Kt.TON})]):[2];case 1:return o=a.sent(),[4,fetch("/tonpay/webhook",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({invoiceId:s,amount:E,status:"PENDING"})})];case 2:return a.sent(),window.location.href="https://beta.pay.thetonpay.app/i/".concat(o.address),[2]}}))})),children:["\u041e\u043f\u043b\u0430\u0442\u0438\u0442\u044c ",E," \u20be"]})]})]})]})}}},function(e){e.O(0,[180,956,774,888,179],(function(){return t=2013,e(e.s=t);var t}));var t=e.O();_N_E=t}]);